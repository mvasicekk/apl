
<div class="container-fluid" ng-controller="persController">
    <div class="no-print">
	<button type="button" class="btn btn-warning btn-xs no-print" ng-model="showHelp" uib-btn-checkbox>
	    ?
	</button>
	<button title="admin info" type="button" class="btn btn-info btn-xs" ng-model="showhI" uib-btn-checkbox ng-show="securityInfo.showArray['admininfo_btn']"  >
	    AI
	</button>
	<apl-help el="hIArray['admininfo_btn']" showadmininfo="showhI"></apl-help>
    </div>
    <div class="page-header">
	<div class="row">
	    <div class="col-sm-10">
		<h4>Personal</h4>
		<apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['form_help']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
	    </div>

	    <div class="col-sm-2 no-print">
		<button ng-if="securityInfo.showArray['btn_hromadneoperace']" class="btn btn-primary btn-small" type="button" ng-click="toggleHromadneOperace()">
		    hromadné operace
		</button>
		<apl-help el="hIArray['btn_hromadneoperace']" showadmininfo="showhI"></apl-help>
	    </div>
	</div>
    </div>

    <!--debug-->
<!--    <div>
	{{securityInfo|json}}
    </div>-->

    <form name="persForm" ng-model-options="{ updateOn: 'blur default' , debounce: { 'default': 500, 'blur': 0 }}" ng-submit="formSubmitted()">
	<div class="row no-print well-sm well">
	    <div class="col-sm-2">
		<div class="form-group form-group-sm">
		    <label class="control-label" for="osoba">os. číslo / jméno</label>
		    <input ng-change="osobaChanged()" ng-model="osoba" type="text" class="form-control" id="osoba" placeholder="hledání pracovníka, zadejte osobní, číslo, jméno ..">
		    <apl-help  editable="isEditor" helpTextUpdater="./updateHelpText.php"  el="hIArray['osoba_suchen']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
		</div>
		<div ng-if="(osoby.length == 0 || osoby == null) && ma.selectedIndex == - 1 && persnrExists === false && isPersNr(osoba)" class="form-group form-group-sm">
		    <button class="btn btn-primary btn-small" type="button" ng-click="addNewBewerber(osoba)">
		    nový uchazeč
		    </button>
		</div>
	    </div>

	    <div class="col-sm-2">
		<div class="form-group form-group-sm">
		    <label class="control-label" for="dpersstatus">status</label>
		    <ui-select multiple ng-model="filt.dstatus" ng-disabled="!securityInfo.editArray['dpersstatus_select']"  ng-readonly="!securityInfo.editArray['dpersstatus_select']" theme="bootstrap" close-on-select="false" style="width: 200px;" title="dpersstatus vybrat" on-select = "statusSelectAction($item,$model)">
		    <!--<ui-select multiple ng-model="filt.dstatus" theme="bootstrap" close-on-select="false" style="width: 200px;" title="dpersstatus vybrat" on-select = "statusSelectAction($item,$model)">-->
			<ui-select-match placeholder="vyberte status">{{$item}}</ui-select-match>
			<ui-select-choices repeat="s in dpersstatuses | filter:$select.search">
			    {{s}}
			</ui-select-choices>
		    </ui-select>
		    <apl-help el="hIArray['dpersstatus_select']" showadmininfo="showhI"></apl-help>
		    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['dpersstatus']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
		</div>
	    </div>
	    <!--	    
			<div class="col-sm-1">
			    <div class="form-group form-group-sm">
				<label class="control-label" for="jenma">pouze MA</label>
				<input ng-change="jenMAChanged()" ng-model="jenma" type="checkbox" class="form-control" id="jenma">
				<apl-help  editable="isEditor" helpTextUpdater="./updateHelpText.php"  el="hIArray['jenma']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			    </div>
			</div>-->

	    <div class="col-sm-1" ng-show="isDstatusOnlyMA()">
		<div class="form-group form-group-sm" title="ukončen maximálně před 60 dny">
		    <label class="control-label" for="jenma">60 dnu</label>
		    <input ng-change="austritt60Changed()" ng-model="austritt60" type="checkbox" class="form-control" id="austritt60">
		    <apl-help  editable="isEditor" helpTextUpdater="./updateHelpText.php"  el="hIArray['austritt60']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
		</div>
	    </div>

	    <div class="col-sm-2">
		<div class="form-group form-group-sm">
		    <label class="control-label" for="oearray">OE</label>
		    <ui-select multiple ng-model="filt.oearray" theme="bootstrap" close-on-select="false" style="width: 200px;" title="vybrat OE" ng-change="oeArrayChanged()">
			<ui-select-match placeholder="vyberte OE">{{$item.oe}}</ui-select-match>
			<ui-select-choices repeat="s.oe as s in oes.oeArray | filter:$select.search"><div ng-bind-html="s.oe"></div>
			    <small>
				{{s.beschreibung_cz}}
			    </small>
			</ui-select-choices>
		    </ui-select>
		    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['oearray']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
		</div>
	    </div>

	    <!--	    <div class="col-sm-1">
			    <div class="form-group form-group-sm">
				<label class="control-label" for="oe">OE</label>
				<select class="form-control" id="oe" name="oe" ng-model="oes.oeSelected" ng-change="oeChanged()">
				    <option ng-selected="oe.oe=='*'" ng-repeat="oe in oes.oeArray" value="{{oe.oe}}">{{oe.oe}} - {{oe.beschreibung_cz}}</option>
				</select>
				<apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['oeselect']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			    </div>
			</div>-->



	</div>

	<div class="row no-print">
	    <!--HF Premie ------------------------------------------------------->
	    <div ng-show="showHromadneOperace" class='col-sm-2'>
		<div class="panel panel-info">
		    <div class="panel-heading">
			<h3 class="panel-title">HFPremie</h3>
			<apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['hroperace']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
		    </div>
		    <div class="panel-body">
			<div class="form-group">
			    <label class="control-label" for="jahr">rok</label>
			    <input ng-min="curJahr-1" ng-max="curJahr+1" min="{{curJahr-1}}" max="{{curJahr+1}}" ng-model="hfPremieJahr" type="number" class="form-control text-right" id="jahr">
			    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['hrjahr']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			</div>
			<div class="form-group">
			    <label class="control-label" for="monat">měsíc</label>
			    <input ng-model="hfPremieMonat" ng-min="1" ng-max="12" min="1" max="12" type="number" class="form-control text-right" id="monat">
			    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['hrmonat']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			</div>
			<button type="button" ng-disabled="fillHFButtonDisabled" class="btn btn-warning btn-block" ng-click="fillHFPremie()">převzít vypočtené</button>
			<apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['btn_fillhf']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			<button type="button" ng-disabled="lockHFButtonDisabled" class="btn btn-danger btn-block" ng-click="lockHFPremie(1)">zamknout hotnoty</button>
			<apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['btn_lockhf']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			<button type="button" ng-disabled="lockHFButtonDisabled" ng-if="isAdmin" class="btn btn-success btn-block" ng-click="lockHFPremie(0)">odemknout hodnoty</button>
			<apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['btn_unlockhf']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			<div class="alert alert-warning" ng-show="lockHFButtonDisabled" role="alert"> aktualizuji zaznamy pro HF premie</div>
		    </div>
		</div>
	    </div>
	    <!-------------------------------------------------------------------->

	    <!--osobni hodnoceni ------------------------------------------------------->
	    <div ng-show="showHromadneOperace" class='col-sm-2'>
		<div class="panel panel-primary">
		    <div class="panel-heading">
			<h3 class="panel-title">osobní hodnocení</h3>
			<apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['hroperace_osobnihodnoceni']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
		    </div>
		    <div class="panel-body">
			<div class="form-group">
			    <label class="control-label" for="jahr">rok</label>
			    <input ng-min="curJahr-1" ng-max="curJahr+1" min="{{curJahr-1}}" max="{{curJahr+1}}" ng-model="osobniHodnoceniJahr" type="number" class="form-control text-right" id="jahr">
			    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['hrjahr_osobnihodnoceni']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			</div>
			<div class="form-group">
			    <label class="control-label" for="monat">měsíc</label>
			    <input ng-model="osobniHodnoceniMonat" ng-min="1" ng-max="12" min="1" max="12" type="number" class="form-control text-right" id="monat">
			    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['hrmonat_osobnihodnoceni']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			</div>
			<button type="button" ng-disabled="fillOHButtonDisabled" class="btn btn-warning btn-block" ng-click="fillOsobniHodnoceni()">převzí firemní hodnoceni</button>
			<apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['btn_fill_osobnihodnoceni']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			<button type="button" ng-disabled="lockOHButtonDisabled" class="btn btn-danger btn-block" ng-click="lockOsobniHodnoceniAll(1)">zamknout hotnoty</button>
			<apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['btn_lock_osobnihodnoceni']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			<button type="button" ng-disabled="lockOHButtonDisabled" ng-if="isAdmin" class="btn btn-success btn-block" ng-click="lockOsobniHodnoceniAll(0)">odemknout hodnoty</button>
			<apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['btn_unlock_osobnihodnoceni']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			<div class="alert alert-warning" ng-show="lockOHButtonDisabled" role="alert"> aktualizuji zaznamy pro osobní hodnocení</div>
		    </div>
		</div>
		<!-------------------------------------------------------------------->

	    </div>
	    <div ng-if="osoby.length > 0 && ma.selectedIndex == - 1" class='col-sm-12'>
		<table class="table table-condensed table-striped table-hover" >
		    <thead>
			<tr>
			    <th>persnr</th>
			    <th>jmeno</th>
			    <th>datum nar.</th>
			    <th>nastup. datum</th>
			    <th>ukonč. datum</th>
			    <th>OE-Schicht (Regel)</th>
			    <th>status</th>
			</tr>
		    </thead>
		    <tbody>
			<tr ng-repeat="r in osoby" ng-click="listRowClicked($index)">
			    <td>{{r.persnr}}</td>
			    <td>{{r.name}} {{r.vorname}}</td>
			    <td>{{r.geboren}}</td>
			    <td>{{r.eintritt}}</td>
			    <td>{{r.austritt}}</td>
			    <td>{{r.regeloe}}</td>
			    <td>{{r.dpersstatus}}</td>
			</tr>
		    </tbody>
		</table>
	    </div>
	</div>

	<div class='row' ng-show="ma.selectedIndex >= 0">
	    <div class="col-sm-12">

		<!--tlacitka pro posun na dalsi/predchozi MA-->
		<div class="row">
		    <div class="col-sm-2 no-print">
			<div class="btn-group btn-group-justified btn-small" role="group" aria-label="...">
			    <div class="btn-group" role="group">
				<button ng-click="moveMA( - 1)" type="button" class="btn btn-default btn-info">
				    <span class="glyphicon glyphicon-backward" aria-hidden="true"></span>
				</button>
			    </div>
			    <div class="btn-group" role="group">
				<button ng-click="moveMA(1)" type="button" class="btn btn-default btn-info btn-small">
				    <span class="glyphicon glyphicon-forward" aria-hidden="true"></span>
				</button>
			    </div>

			</div>
		    </div>

		    <!--button group pro zobrazeni jednotlivych panelu -------->
		    <div ng-show="securityInfo.showArray['select_panelswitch']" class="col-sm-2 no-print">
			<div class="btn-group">
				<button type="button" class="btn btn-default btn-block dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
				panel <span class="caret"></span>
				</button>
			    <ul class="dropdown-menu">
<!--				<li><a ng-click="panelSwitch('bewerber')" role="button" href="">uchazeč (Bewerber)</a></li>
				<li role="separator" class="divider"></li>
				<li><a ng-click="panelSwitch('inventar')" role="button" href="">inventar</a></li>-->
				<li ng-show="securityInfo.showArray['kvalifikace_switch_item']">
				    <a ng-click="panelSwitch('kvalifikace')" role="button" href="">kvalifikace</a>
				    <apl-help el="hIArray['kvalifikace_switch_item']" showadmininfo="showhI"></apl-help>
				</li>
				<li ng-show="securityInfo.showArray['identifikatory_switch_item']">
				    <a ng-click="panelSwitch('identifikatory')" role="button" href="">identifikátory</a>
				    <apl-help el="hIArray['identifikatory_switch_item']" showadmininfo="showhI"></apl-help>
				</li>
				<li ng-show="securityInfo.showArray['lohninfo_switch_item']">
				    <a ng-click="panelSwitch('lohninfo')" role="button" href="">lohninfo</a>
				    <apl-help el="hIArray['lohninfo_switch_item']" showadmininfo="showhI"></apl-help>
				</li>
				<li ng-show="securityInfo.showArray['aplinfo_switch_item']">
				    <a ng-click="panelSwitch('aplinfo')" role="button" href="">aplinfo</a>
				    <apl-help el="hIArray['aplinfo_switch_item']" showadmininfo="showhI"></apl-help>
				</li>
				<li role="separator" class="divider"></li>
				<li ng-show="securityInfo.showArray['hfpremie_switch_item']">
				    <a ng-click="panelSwitch('hfpremie',hIArray['hfpremie_switch_item'][0].id)" role="button" href="">HF Premie</a>
				    <apl-help el="hIArray['hfpremie_switch_item']" showadmininfo="showhI"></apl-help>
				</li>
				<li ng-show="securityInfo.showArray['osobnihodnoceni_switch_item']">
				    <a ng-click="panelSwitch('osobnihodnoceni')" role="button" href="">osobní hodnocení</a>
				    <apl-help el="hIArray['osobnihodnoceni_switch_item']" showadmininfo="showhI"></apl-help>
				</li>
				<li ng-show="securityInfo.showArray['lohnberechnung_switch_item']"><a ng-click="panelSwitch('lohnberechnung')" role="button" href="">výpočet mzdy</a>
				<apl-help el="hIArray['lohnberechnung_switch_item']" showadmininfo="showhI"></apl-help>
				</li>
			    </ul>
			</div>
			<apl-help el="hIArray['select_panelswitch']" showadmininfo="showhI"></apl-help>
		    </div>
		    
		    <div class="col-sm-8 no-print">
			<div class="btn-group btn-group-justified btn-group-sm" role="group">
			    <div class="btn-group" role="group">
				<button type="button" ng-click="panelSwitch('grundinfo')" class="btn btn-info" role="button" href="">Grundinfo</button>
			    </div>
			    <div ng-show="securityInfo.showArray['bewerber_btn']" class="btn-group" role="group">
				<button type="button" ng-click="panelSwitch('bewerber')" class="btn btn-info" role="button" href="">uchazeč (Bewerber)</button>
				<apl-help el="hIArray['bewerber_btn']" showadmininfo="showhI"></apl-help>
			    </div>
			    <div ng-show="securityInfo.showArray['inventar_btn']"  class="btn-group" role="group">
				<button type="button" ng-click="panelSwitch('inventar')"  class="btn btn-info" role="button" href="">inventar</button>
				<apl-help el="hIArray['inventar_btn']" showadmininfo="showhI"></apl-help>
			    </div>
			    <div ng-show="securityInfo.showArray['majetek_btn']"  class="btn-group" role="group">
				<button type="button" ng-click="panelSwitch('majetek')"  class="btn btn-info" role="button" href="">majetek</button>
				<apl-help el="hIArray['majetek_btn']" showadmininfo="showhI"></apl-help>
			    </div>
			    <div ng-show="securityInfo.showArray['dokumenty_switch_item']"  class="btn-group" role="group">
				<button type="button" ng-click="panelSwitch('dokumenty')"  class="btn btn-info" role="button" href="">dokumenty</button>
				<apl-help el="hIArray['dokumenty_switch_item']" showadmininfo="showhI"></apl-help>
			    </div>
			</div>
		    </div>
		    
		    
		    
		<!--------------------------------------------------------->
		</div>

		<!--stale viditelna informace o vybranem MA-->
		<!--jako header-->
		<div  class="row">
		    <div class="col-sm-12">
			<div class="well well-sm">
			    <div class="row">
				<div class="col-sm-4">
				    <h4>{{ma.maInfo.PersNr}} {{ma.maInfo.Vorname}} {{ma.maInfo.Name}} <span ng-show="ma.maInfo.abkrz.length>0">({{ma.maInfo.abkrz}})</span>
					<small><span ng-show="!securityInfo.showArray['dpersstatus1']" class="label label-success">{{ma.maInfo.dpersstatus}}</span></small>
					<select style='width:33%;' title="status" ng-show="securityInfo.showArray['dpersstatus1']" ng-options="option for option in dpersstatuses" ng-model="ma.maInfo.dpersstatus" class="form-control input-xs" ng-change="dpersFieldChanged('dpersstatus')"></select>
					<apl-help el="hIArray['dpersstatus1']" showadmininfo="showhI"></apl-help>
				    </h4>
				    <span class="label label-info">{{ma.maInfo.regeloe}} (OE:{{ma.oeInfo.oe}})</span>
				    
				    <!--obrazek -------------------------------> 
<!--				    <img style="width:120px;" class="img-thumbnail" ng-if="ma.maFotoUrl!==null && isEditor" ng-src="{{ma.maFotoUrl}}" />
				    <div ng-if="ma.maFotoUrl==null  && isEditor">
				    <div>
					<button ngf-select="uploadFiles1($files,$invalidFiles,selectedButton)" type="button" class="btn btn-xs btn-success" aria-label="Left Align">
					<span class="glyphicon glyphicon-plus" aria-hidden="true"></span>foto
					</button>
				    <div ng-if="files.length>0">
					<ul class="list-group">
					    <li class="list-group-item" ng-repeat="f in files" style="font:smaller">{{f.name}}
						<div class="progress">
						<div aria-valuenow="{{f.progress}}" aria-valuemin="0" aria-valuemax="100" class="progress-bar progress-bar-warning" role="progressbar" style="width: {{f.progress}}%">
						{{f.progress}} %
						</div>
						</div>
					    </li>
					</ul>
				    </div>
				    </div>-->
				    <!--obrazek konec----------------------- -->
				</div>
				
				<!--eintritt,austritt,befristet,probezeit-->
				<div class="col-sm-4">
				    <div class="row">
					<div class="col-sm-6">
					    <small>Eintritt: </small>{{ma.maInfo.eintrittF}}<br>
					    <small>Befristet: </small>{{ma.dpersDetail.dobaurcitaF}}
					</div>
					<div class="col-sm-6">
					    <small>Austritt: </small>{{ma.maInfo.austrittF}}<br>
					    <small>Probezeit: </small>{{ma.dpersDetail.zkusebni_doba_dobaurcitaF}}
					</div>
				    </div>
				</div>
				
				<!--geburtsdatumdatum,gebort,telefon+mobil-->
				<div class="col-sm-4">
				    <div class="row">
					<div class="col-sm-6">
					    <small>Geburtsdatum: </small> {{ma.maInfo.geborenF}}<br>
					    <small>Gegurtsort: </small> {{ma.maInfo.gebort}}<br>
					    <small>Tel.: </small> {{ma.dpersDetail.kom7}}
					</div>
					<div class="col-sm-6">
					    <!--<div class="form-horizontal">-->
						<div class="form-group">
						    <label for="schuhegroesse" class="control-label">SchuheGr.:</label>
						    <input ng-readonly="!securityInfo.editArray['schuhegroesse_input']" ng-model="ma.dpersDetail.schuhegroesse" type="text" class="form-control text-right" id="schuhegroesse" placeholder="velikost bot"  ng-change="dpersdetailFieldChanged('schuhegroesse')">
						    <apl-help el="hIArray['schuhegroesse_input']" showadmininfo="showhI"></apl-help>
						</div>
					    <!--</div>-->
					</div>
				    </div>
				</div>
			    </div>
			    
			</div>
		    </div>
		</div>
	    </div>
	</div>
	<div class="row"  ng-show="ma.selectedIndex >= 0">
	    <div class="col-sm-12">
		
		<!--lohn berechnung                                          -->
		<div ng-show="showPanel.lohnberechnung" id="lohnberechnung">
		    <div class="panel panel-success">
			<div class="panel-heading">
			    výpočet mzdy
			    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['lohnberechnung_panel']" showhelp="showHelp" showadmininfo="showhI" />
			</div>
			<div ng-show="lohnArray===null" class="panel-body">
			    <div class="alert alert-warning text-center"><h4>počítám ....</h4></div>
			</div>
			<div ng-show="lohnArray!==null" class="panel-body">
			    <div class="row">
				<div class='col-sm-12'>
				<div class="form-group col-md-2 form-group-sm">
				    <label class="control-label"  for="lohnMonat">měsíc:</label>
				    <div class="input-group">
					<input ng-change="updateLohn()" ng-model="lohnMonat" type="number" class="form-control" id="lohnMonat" placeholder="měsíc">
				    </div>
				</div>
				<div class="form-group col-md-2 form-group-sm">
				    <label class="control-label"  for="lohnJahr">rok:</label>
				    <div class="input-group">
					<input ng-change="updateLohn()" ng-model="lohnJahr" type="number" class="form-control" id="lohnJahr" placeholder="rok">
				    </div>
				</div>
				</div>
				<div class="col-sm-6" ng-if="lohnArray!==null">
					<fieldset>
					    <legend>info / parametry</legend>
					    <table class="table-condensed table-striped table-responsive table-bordered">
						<thead>
						    <tr>
							<th class="">parametr</th>
							<th class="">hodnota</th>
						    </tr>
						</thead>
						<tbody>
						    <tr>
							<th class="">perslohnfaktor = sundenlohn Kč/hod</th>
							<td class="text-right">{{lohnArray.grundinfo.perslohnfaktor*60|numeraljs:'0,0.00'}}</td>
						    </tr>
						    <tr>
							<th class="">leistungfaktor</th>
							<td class="text-right">{{lohnArray.grundinfo.leistfaktor|numeraljs:'0,0.00'}}</td>
						    </tr>
						    <tr>
							<th class="">eintritt</th>
							<td class="text-right">{{lohnArray.persinfoinfo.eintritt}}</td>
						    </tr>
						    <tr>
							<th class="">zkusebni doba do</th>
							<td class="text-right">{{lohnArray.persinfoinfo.zkusebni_doba_dobaurcita}}</td>
						    </tr>
						    <tr>
							<th class="">einarb zuschlag</th>
							<td class="text-right">{{lohnArray.persinfoinfo.einarb_zuschlag}}</td>
						    </tr>
						    <tr>
							<th class="">adaptace do</th>
							<td class="text-right">{{lohnArray.persinfoinfo.adaptace_bis}}</td>
						    </tr>
						</tbody>
					    </table>
					</fieldset>
    					<fieldset>
					    <legend>hodiny / dny</legend>
					    <table class="table-condensed table-striped table-responsive table-bordered">
						<thead>
						    <tr>
							<th class="text-right">Anw - Akkord</th>
							<th class="text-right">Anw - Zeit</th>
							<th class="text-right">Tage - d</th>
							<th class="text-right">Tage - z</th>
						    </tr>
						</thead>
						<tbody>
						    <tr>
							<td class="text-right">{{lohnArray.grundinfo.sumstundena_akkord|numeraljs:'0,0.0'}}</td>
							<td class="text-right">{{(lohnArray.grundinfo.sumstundena-lohnArray.grundinfo.sumstundena_akkord)|numeraljs:'0,0.0'}}</td>
							<td class="text-right">{{lohnArray.grundinfo.tage_d}}</td>
							<td class="text-right">{{lohnArray.grundinfo.tage_z}}</td>
						    </tr>
						</tbody>
					    </table>
					</fieldset>

					<fieldset>
					    <legend>mzda pro cely mesic akkord/zeit</legend>
					    <table class="table-condensed table-striped table-responsive table-bordered">
						<thead>
						    <tr>
							<th>OE</th>
							<th class="text-right">vzaby</th>
							<th class="text-right">vzaby_akkord</th>
							<th class="text-right">vzaby_akkord_kc</th>
							<th class="text-right">vzaby_zeit</th>
							<th class="text-right">vzaby_zeit_kc</th>
						    </tr>
						</thead>
						<tbody>
						    <tr ng-repeat="r in lohnArray.monatlohn.oes">
							<td>{{r.oe}}</td>
							<td class="text-right">{{r.vzaby|numeraljs:'0,0'}}</td>
							<td class="text-right">{{r.vzaby_akkord|numeraljs:'0,0'}}</td>
							<td class="text-right">{{r.vzaby_akkord_kc|numeraljs:'0,0.00'}}</td>
							<td class="text-right">{{r.vzaby_zeit|numeraljs:'0,0'}}</td>
							<td class="text-right">{{r.vzaby_zeit_kc|numeraljs:'0,0.00'}}</td>
						    </tr>
						</tbody>
						<tfoot>
						    <tr>
							<th>Sum</th>
							<th class="text-right">{{lohnArray.monatlohn.sumVzaby|numeraljs:'0,0'}}</th>
							<th class="text-right">{{lohnArray.monatlohn.sumVzabyAkkord|numeraljs:'0,0'}}</th>
							<th class="text-right">{{lohnArray.monatlohn.sumVzabyAkkordKc|numeraljs:'0,0.00'}} Kč</th>
							<th class="text-right">{{lohnArray.monatlohn.sumVzabyZeit|numeraljs:'0,0'}}</th>
							<th class="text-right">{{lohnArray.monatlohn.sumVzabyZeitKc|numeraljs:'0,0.00'}} Kč</th>
						    </tr>
						</tfoot>
					    </table>
					</fieldset>
				    
				    <fieldset ng-show="lohnArray.mzdaPodleAdaptace">
					    <legend>mzda podle adaptace</legend>
					    <table class="table-condensed table-striped table-responsive table-bordered">
						<thead>
						    <tr>
							<th>datum</th>
							<th class="text-right">prac. dnu od nastupu</th>
							<th class="text-right">Kč / hod</th>
							<th class="text-right">dochazka (hod)</th>
							<th class="text-right">mzda / den ( Kč )</th>
						    </tr>
						</thead>
						<tbody>
						    <tr ng-repeat="(datum,al) in lohnArray.adaptlohn.tage">
							<td>{{datum}}</td>
							<td class="text-right">{{al.tageAbEintritt|numeraljs:'0,0'}}</td>
							<td class="text-right">{{al.stundenLohn|numeraljs:'0,0.00'}} Kč</td>
							<td class="text-right">{{al.anwStunden|numeraljs:'0,0.00'}}</td>
							<td class="text-right">{{al.tagLohn|numeraljs:'0,0.00'}} Kč</td>
						    </tr>
						</tbody>
						<tfoot>
						    <tr>
							<th colspan="4">Sum</th>
							<th class="text-right">{{lohnArray.adaptlohn.summeLohn|numeraljs:'0,0.00'}} Kč</th>
						    </tr>
						</tfoot>
					    </table>
					</fieldset>
				    <fieldset ng-show="lohnArray.monatlohnRest!==undefined">
					    <legend>mzda Akkord/Zeit - Rest po adaptaci</legend>
					    <table class="table-condensed table-striped table-responsive table-bordered">
						<thead>
						    <tr>
							<th>OE</th>
							<th class="text-right">vzaby</th>
							<th class="text-right">vzaby_akkord</th>
							<th class="text-right">vzaby_akkord_kc</th>
							<th class="text-right">vzaby_zeit</th>
							<th class="text-right">vzaby_zeit_kc</th>
						    </tr>
						</thead>
						<tbody>
						    <tr ng-repeat="r in lohnArray.monatlohnRest.oes">
							<td>{{r.oe}}</td>
							<td class="text-right">{{r.vzaby|numeraljs:'0,0'}}</td>
							<td class="text-right">{{r.vzaby_akkord|numeraljs:'0,0'}}</td>
							<td class="text-right">{{r.vzaby_akkord_kc|numeraljs:'0,0.00'}}</td>
							<td class="text-right">{{r.vzaby_zeit|numeraljs:'0,0'}}</td>
							<td class="text-right">{{r.vzaby_zeit_kc|numeraljs:'0,0.00'}}</td>
						    </tr>
						</tbody>
						<tfoot>
						    <tr>
							<th>Sum</th>
							<th class="text-right">{{lohnArray.monatlohnRest.sumVzaby|numeraljs:'0,0'}}</th>
							<th class="text-right">{{lohnArray.monatlohnRest.sumVzabyAkkord|numeraljs:'0,0'}}</th>
							<th class="text-right">{{lohnArray.monatlohnRest.sumVzabyAkkordKc|numeraljs:'0,0.00'}} Kč</th>
							<th class="text-right">{{lohnArray.monatlohnRest.sumVzabyZeit|numeraljs:'0,0'}}</th>
							<th class="text-right">{{lohnArray.monatlohnRest.sumVzabyZeitKc|numeraljs:'0,0.00'}} Kč</th>
						    </tr>
						</tfoot>
					    </table>
					</fieldset>
					
				</div>
				<div class="col-sm-6"  ng-if="lohnArray!==null">
				    <!--osobni hodnoceni-->
				    <fieldset>
					    <legend>B.1 osobni hodnocení</legend>
					    <table class="table-condensed table-striped table-responsive table-bordered">
						<thead>
						    <tr>
							<th></th>
							<th class="text-right">částka</th>
						    </tr>
						</thead>
						<tbody>
						    <tr>
							<td>osobní hodnoceni</td>
							<td class="text-right">{{lohnArray.osobnihodnoceni.sumaCastka|numeraljs:'0,0.00'}}</td>
						    </tr>
						    <tr>
							<td>koeficient (anwMinuten/monatNormMinuten), max. 1</td>
							<td class="text-right">{{lohnArray.osobnihodnoceni.anwStd*60|numeraljs:'0,0'}} / {{lohnArray.osobnihodnoceni.ganzMonatNormMinuten|numeraljs:'0,0'}} = {{lohnArray.osobnihodnoceni.koeficient|numeraljs:'0,0.00'}}</td>
						    </tr>
						    <tr>
							<th>osobní hodnocení k výplatě</th>
							<th class="text-right">{{lohnArray.osobnihodnoceni.sumaCastkaFinal|numeraljs:'0,0.00'}} Kč</th>
						    </tr>
						</tbody>
					    </table>
					</fieldset>
				    
				    <fieldset>
					    <legend>C.1 prémie za kvalifikaci</legend>
					    <table class="table-condensed table-striped table-responsive table-bordered">
						<thead>
						    <tr>
							<th>OE</th>
							<th>platí od</th>
							<th class="text-right">%</th>
						    </tr>
						</thead>
						<tbody>
						    <tr ng-repeat="(oe,r) in lohnArray.premieZaKvalifikaci.oeKvalifikaceArray">
							<td>{{oe}}</td>
							<td>{{r.gilt_ab}}</td>
							<td class="text-right">{{r.pct*100|numeraljs:'0,0.00'}}</td>
						    </tr>
						</tbody>
						<tfoot>
						    <tr>
							<th>Sum</th>
							<th class="text-right"></th>
							<th class="text-right">{{lohnArray.premieZaKvalifikaci.sumPctKvalifikace*100|numeraljs:'0,0.00'}}</th>
						    </tr>
						</tfoot>
					    </table>
					    <table  class="table-condensed table-striped table-responsive table-bordered">
						<thead>
						    <tr>
							<th></th>
							<th class="text-right">Kč</th>
						    </tr>
						</thead>
						<tbody>
						    <tr>
							<th>akkord</th>
							<td class="text-right">{{lohnArray.premieZaKvalifikaci.akkord|numeraljs:'0,0.00'}} Kč</td>
						    </tr>
    						    <tr>
							<th>zeit</th>
							<td class="text-right">{{lohnArray.premieZaKvalifikaci.zeit|numeraljs:'0,0.00'}} Kč</td>
						    </tr>
						    <tr>
							<th>Sum</th>
							<th class="text-right">{{(lohnArray.premieZaKvalifikaci.zeit+lohnArray.premieZaKvalifikaci.akkord)|numeraljs:'0,0.00'}} Kč</th>
						    </tr>
						</tbody>
					    </table>
					</fieldset>
				    
				    <fieldset ng-if="lohnArray.aPremie.apremie_flag.length>0">
					    <legend>C.2 A-Prémie (prémie za kvalitu)</legend>
					    <table class="table-condensed table-striped table-responsive table-bordered">
						<thead>
						    <tr>
							<th>info</th>
							<th class="text-right">částka</th>
						    </tr>
						</thead>
						<tbody>
						    <tr>
							<th>opravy (65XX)</th>
							<td class="text-right">
							    {{lohnArray.aPremie.zeilen[ma.maInfo.PersNr].nacharbeit.faktor.czk|numeraljs:'0,0.00'}} Kč
							</td>
						    </tr>
						    <tr>
							<th>A6</th>
							<td class="text-right">
							    {{lohnArray.aPremie.zeilen[ma.maInfo.PersNr].A6.a6_prozent.czk|numeraljs:'0,0.00'}} Kč
							</td>
						    </tr>
						    <tr>
							<th>reklamace INTERN</th>
							<td class="text-right">
							    {{lohnArray.aPremie.zeilen[ma.maInfo.PersNr].rekl.sum_bewertung_I.czk|numeraljs:'0,0.00'}} Kč
							</td>
						    </tr>
						    <tr>
							<th>reklamace EXTERN</th>
							<td class="text-right">
							    {{lohnArray.aPremie.zeilen[ma.maInfo.PersNr].rekl.sum_bewertung_E.czk|numeraljs:'0,0.00'}} Kč
							</td>
						    </tr>
						    <tr>
							<th>leistung (VzAby/Anw) [%]</th>
							<td class="text-right">
							    {{lohnArray.aPremie.zeilen[ma.maInfo.PersNr].leistung.leistGrad[lohnParams.mj]|numeraljs:'0,0'}}
							</td>
						    </tr>
						    <tr>
							<th>
							    Suma A-Premie (Kč x Leistung)
							    <span ng-if="lohnArray.aPremie.apremie_flag=='V'" class="label label-success">{{lohnArray.aPremie.apremie_flag}}</span>
							    <span ng-if="lohnArray.aPremie.apremie_flag=='!'" class="label label-danger">{{lohnArray.aPremie.apremie_flag}}</span>
							</th>
							<th class="text-right">{{lohnArray.aPremie.apremie|numeraljs:'0,0.00'}} Kč</th>
						    </tr>
						    <!--ko kriteria , jen ty, ktere mi vynuluji premii-->
						    <tr ng-show="lohnArray.aPremie.koKriteriaArray.ko_dzeit_z.multi=='0'">
							<th colspan="2">
							    <span class="label label-danger">ko-kriterium "Z" !!!</span>
							</th>
						    </tr>
						    <tr ng-show="lohnArray.aPremie.koKriteriaArray.ko_dzeit_anw_prozent.multi=='0'">
							<th colspan="2">
							    <span class="label label-danger">ko-kriterium "Anw-Prozent" !!!</span>
							</th>
						    </tr>
						    <tr ng-show="lohnArray.aPremie.koKriteriaArray.ko_a50.multi=='0'">
							<th colspan="2">
							    <span class="label label-danger">ko-kriterium "Ausschuss 50" !!!</span>
							</th>
						    </tr>
						    <tr ng-show="lohnArray.aPremie.koKriteriaArray.ko_rekl_E.multi=='0'">
							<th colspan="2">
							    <span class="label label-danger">ko-kriterium "reklamace EXTERN" !!!</span>
							</th>
						    </tr>
						</tbody>
					    </table>
					    
					</fieldset>
				    
				    <fieldset>
					    <legend>C.3 výkonnostní prémie</legend>
					    <table class="table-condensed table-striped table-responsive table-bordered">
						<thead>
						    <tr>
							<th></th>
							<th></th>
							<th></th>
							<th></th>
						    </tr>
						</thead>
						<tbody>
						    <tr>
							<th class="text-left">vzabyLeistung = vzabyAkkord + leistungZeit</th>
							<td style='white-space: nowrap;' class="text-right">{{lohnArray.leistungPremie.vzabyAkkord|numeraljs:'0,0'}}</td>
							<td style='white-space: nowrap;'  class="text-right">{{lohnArray.leistungPremie.leistungZeit|numeraljs:'0,0'}}</td>
							<th  style='white-space: nowrap;' class="text-right">{{(lohnArray.leistungPremie.leistungZeit+lohnArray.leistungPremie.vzabyAkkord)|numeraljs:'0,0'}}</th>
						    </tr>
						    <tr>
							<th class="text-left">monatNormMinuten</th>
							<td  style='white-space: nowrap;' class="text-right">{{lohnArray.leistungPremie.monatNormMinuten|numeraljs:'0,0'}}</td>
							<th class="text-left">leistungsGrad</th>
							<td  style='white-space: nowrap;' class="text-right">{{lohnArray.leistungPremie.leistungsGrad|numeraljs:'0,0.00'}} ({{lohnArray.leistungPremie.betragLGrad|numeraljs:'0,0'}} Kč)</td>
						    </tr>
						    <tr>
							<th class="text-left">ganzMonatNormMinuten</th>
							<td  style='white-space: nowrap;' class="text-right">{{lohnArray.leistungPremie.ganzMonatNormMinuten|numeraljs:'0,0'}}</td>
							<th class="text-left">leistungsGradGanzMonat</th>
							<td  style='white-space: nowrap;' class="text-right">{{lohnArray.leistungPremie.leistungsGradGanzMonat|numeraljs:'0,0.00'}} ({{lohnArray.leistungPremie.betragLGradMonat|numeraljs:'0,0'}} Kč)</td>
						    </tr>
						    <tr>
							<th class="text-left">Tage (dny pro vypocet premie)</th>
							<td  style='white-space: nowrap;' class="text-right">{{lohnArray.leistungPremie.tageBerechnet|numeraljs:'0,0'}}</td>
							<th class="text-left">anwTageArbTage</th>
							<td  style='white-space: nowrap;' class="text-right">{{lohnArray.leistungPremie.anwTageArbTage|numeraljs:'0,0'}}</td>
						    </tr>
						    <tr>
							<th class="text-left" colspan="2">Betrag</th>
							<th  style='white-space: nowrap;' class="text-right" colspan="2">{{lohnArray.leistungPremie.leistungsPremieBetrag|numeraljs:'0,0.00'}} Kč</th>
						    </tr>
						</tbody>
					    </table>
					</fieldset>
				    
				    <fieldset>
					    <legend>C.4 čtvrtletní prémie</legend>
					    <table class="table-condensed table-striped table-responsive table-bordered">
						<thead>
						    <tr>
							<th></th>
							<th></th>
						    </tr>
						</thead>
						<tbody>
						    <tr>
							<th class="text-left">QTL Leistung SOLL</th>
							<td class="text-right">{{lohnArray.qtlPremie.qtlLeistungSoll|numeraljs:'0,0'}}</td>
						    </tr>
   						    <tr>
							<th class="text-left">QTL Leistung IST</th>
							<td class="text-right">{{lohnArray.qtlPremie.qtlLeistungIst|numeraljs:'0,0'}}</td>
						    </tr>
						    <tr>
							<th class="text-left">QTL Leistung Kč</th>
							<td class="text-right">{{lohnArray.qtlPremie.qtlLeistungIstKc|numeraljs:'0,0.00'}} Kč</td>
						    </tr>						    
						    <tr>
							<th class="text-left">QTL Premie Kč</th>
							<th class="text-right">{{lohnArray.qtlPremie.qtlPremieBetrag|numeraljs:'0,0.00'}} Kč</th>
						    </tr>						    
						</tbody>
					    </table>
					</fieldset>
				</div>
			    </div>
			</div>
		    </div>
		</div>
		<!--panel grundinfo ---------------------------------->
		<div ng-show="showPanel.grundinfo" id="grundinfo">
		    <div class="panel panel-success">
			<div class="panel-heading">
			    Grundinfo
			    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['grundinfo_panel']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			</div>
			<div class="panel-body">
			    <div class="row">
				<div class="col-sm-6">
				    <div class="form-horizontal">
					<fieldset>
					    <legend>person</legend>
					    <div class="form-group">
						<label for="vorname" class="col-sm-2 control-label">jméno</label>
						<div class="col-sm-4">
						    <input ng-readonly="!securityInfo.editArray['vorname_input']" ng-model="ma.maInfo.Vorname" type="text" class="form-control" id="vorname" placeholder="jmeno"  ng-change="dpersFieldChanged('Vorname')">
						    <apl-help el="hIArray['vorname_input']" showadmininfo="showhI"></apl-help>
						</div>
						<label for="name" class="col-sm-2 control-label">příjmení</label>
						<div class="col-sm-4">
						    <input ng-readonly="!securityInfo.editArray['name_input']" ng-model="ma.maInfo.Name" type="text" class="form-control" id="name" placeholder="příjmení"  ng-change="dpersFieldChanged('Name')">
						    <apl-help el="hIArray['name_input']" showadmininfo="showhI"></apl-help>
						</div>
					    </div>
					    <div class="form-group">
						<label for="g" class="col-sm-2 control-label">datum narození</label>
						<div class="col-sm-4">
						    <input ng-readonly="!securityInfo.editArray['geboren_input']" ng-model="ma.maInfo.geboren" ui-date="dateOptions" type="text" class="form-control" id="g" placeholder="datum narození"  ng-change="dpersFieldChanged('geboren')">
						    <apl-help el="hIArray['geboren_input']" showadmininfo="showhI"></apl-help>
						</div>
						<label for="g" class="col-sm-2 control-label">Spec.Nr</label>
						<div class="col-sm-4">
						    <input ng-readonly="!securityInfo.editArray['specnr_input']" ng-model="ma.maInfo.specnr" type="text" class="form-control text-right" id="g1" placeholder="např. č. udávané VS"  ng-change="dpersFieldChanged('specnr')">
						    <apl-help el="hIArray['specnr_input']" showadmininfo="showhI"></apl-help>
						</div>
					    </div>
					</fieldset>
					<fieldset>
					    <legend>stát</legend>
					    <div class="form-group">
						<label class="col-sm-2 control-label" for="staats_angehoerigkeit_id">státní příslušnost</label>
						<div class="col-sm-10">
						    <ui-select ng-disabled="!securityInfo.editArray['staats_angehoerigkeit_select']" ng-readonly="!securityInfo.editArray['staats_angehoerigkeit_select']" ng-model="ma.bewerberInfo.staats_angehoerigkeit_id" theme="bootstrap" close-on-select="true" title="vybrat status" on-select="bewerberFieldOnSelect($item,$model,'staats_angehoerigkeit_id')">
							<ui-select-match placeholder="vyberte státní příslušnost">{{$select.selected.staat_abkrz}} {{$select.selected.staat_name}}</ui-select-match>
							<ui-select-choices repeat="s.id as s in staaten | filter:$select.search">
							    <small>
								<strong>{{s.staat_abkrz}}</strong>
							    </small>
							    <div><em>{{s.staat_name}}</em></div>
							</ui-select-choices>
						    </ui-select>
						    <apl-help el="hIArray['staats_angehoerigkeit_select']" showadmininfo="showhI"></apl-help>
						</div>
					    </div>
					    <div class="form-group">
						<label class="col-sm-2 control-label" for="staats_gruppe_id">staatsgruppe</label>
						<div class="col-sm-10">
						    <ui-select  ng-disabled="!securityInfo.editArray['staats_gruppe_select']" ng-readonly="!securityInfo.editArray['staats_gruppe_select']" ng-model="ma.bewerberInfo.staats_gruppe_id" theme="bootstrap" close-on-select="true" title="vybrat status" on-select="bewerberFieldOnSelect($item,$model,'staats_gruppe_id')">
							<ui-select-match placeholder="vyberte staatsgruppe">{{$select.selected.text_lang}}</ui-select-match>
							<ui-select-choices repeat="s.id as s in staats_gruppen | filter:$select.search">
							    <div><em>{{s.text_lang}}</em></div>
							</ui-select-choices>
						    </ui-select>
						    <apl-help el="hIArray['staats_gruppe_select']" showadmininfo="showhI"></apl-help>
						</div>
					    </div>
					    
					</fieldset>
				    </div>
				</div>
				<div class="col-sm-6">
				    <div class="form-horizontal">
					<fieldset>
					    <legend>kontakty</legend>
					    <div class="form-group">
						<label for="tc" class="col-sm-2 control-label">telefonní číslo</label>
						<div class="col-sm-4">
						    <input ng-readonly="!securityInfo.editArray['kom7_input']" ng-model="ma.dpersDetail.kom7" type="text" class="form-control" id="tc" placeholder="telefonní číslo"  ng-change="dpersdetailFieldChanged('kom7')">
						    <apl-help el="hIArray['kom7_input']" showadmininfo="showhI"></apl-help>
						</div>
						<label for="em" class="col-sm-2 control-label">email</label>
						<div class="col-sm-4">
						    <input ng-readonly="!securityInfo.editArray['email_input']" ng-model="ma.maInfo.email" type="text" class="form-control" id="email" placeholder="email"  ng-change="dpersFieldChanged('email')">
						    <apl-help el="hIArray['email_input']" showadmininfo="showhI"></apl-help>
						</div>
					    </div>
					</fieldset>
				    </div>
				    <div class="form-horizontal">
					<fieldset>
					    <legend>adresy</legend>
					    <div class="row">
						<div class="col-sm-6">
						    <div class="panel panel-info">
							<div class="panel-heading">
							    aktuell
							</div>
							<div class="panel-body">
							    <address>
								{{ma.dpersDetail.strasse}}<br>
								{{ma.dpersDetail.plz}} {{ma.maInfo.komm_ort}}<br>
							    </address>
							</div>
						    </div>
						</div>
						<div class="col-sm-6">
						    <div class="panel panel-info">
							<div class="panel-heading">
							    PA
							</div>
							<div class="panel-body">
							    <address>
								{{ma.dpersDetail.strasse_op}}<br>
								{{ma.dpersDetail.plz_op}} {{ma.dpersDetail.ort_op}}<br>
							    </address>
							</div>
						    </div>
						</div>
					    </div>
					</fieldset>
				    </div>
				</div>
				<div class="col-sm-3">
				    <div class="form-horizontal">
					<div class="form-group">
					<label for="regeltrans" class="control-label col-sm-7">Regeltransport Preis</label>
					<div class="col-sm-5">
					    <input ng-readonly="!securityInfo.editArray['regeltrans_input']" ng-model="ma.dpersDetail.regeltrans" type="text" class="form-control text-right" id="regeltrans" placeholder="cena za dopravu"  ng-change="dpersdetailFieldChanged('regeltrans')">
					    <apl-help el="hIArray['regeltrans_input']" showadmininfo="showhI"></apl-help>
					</div>
					
				    </div>
				    </div>
				</div>
			    </div>
			</div>
		    </div>
		</div>
		<!--panel uchazec / bewerber ---------------------------------->
		<div ng-show="showPanel.bewerber" id="bewerber">
		    <div class="panel panel-success">
			<div class="panel-heading">
			    uchazeč ( Bewerber  )
			    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['bewerber_panel']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			</div>
			<div class="panel-body">
			    <div class="row">
				<div class="col-sm-6">
				    <div class="form-horizontal">
					
					<fieldset>
					    <legend>Bewerbung</legend>
					    <div class="form-group">
						<label for="bewerbe_datum" class="col-sm-1 control-label">Datum</label>
						<div class="col-sm-3">
						    <input ng-model="ma.bewerberInfo.bewerbe_datum" ui-date="dateOptions" type="text" class="form-control" id="bewerbe_datum" placeholder="Vorstellungsgespraech am"  ng-change="bewerberFieldChanged('bewerbe_datum')">
						</div>
						<label class="col-sm-2 control-label" for="status_fur_aby">geeignet</label>
						<div class="col-sm-6">
						    <ui-select ng-model="ma.bewerberInfo.status_fur_aby_id" theme="bootstrap" close-on-select="true" title="vybrat status" on-select="bewerberFieldOnSelect($item,$model,'status_fur_aby_id')">
							<ui-select-match placeholder="vyberte status">{{$select.selected.text_kurz}} {{$select.selected.text_lang}}</ui-select-match>
							<ui-select-choices repeat="s.id as s in status_fur_aby | filter:$select.search">
							    <small>
								<strong>{{s.text_kurz}}</strong>
							    </small>
							    <div><em>{{s.text_lang}}</em></div>
							</ui-select-choices>
						    </ui-select>
						</div>
					    </div>
					</fieldset>
					
					
					<fieldset>
					    <legend>Bewertung</legend>
					    <div class="col-sm-4">
						<div class="form-group">
						    <label for="bewertung1" class="control-label">physisch</label>
						    <select style="width:50%;" ng-options="option for option in hodnoceniArray" ng-model="ma.bewerberInfo.bewertung1" class="form-control" id="bewertung1" placeholder="Bewertung 1-10" ng-change="bewerberFieldChanged('bewertung1')"></select>
						</div>
					    </div>
					    <div class="col-sm-4">
						<div class="form-group">
						    <label for="bewertung2" class="control-label">Arbeitungserfahrungen</label>
						    <div class="">
							<select style="width:50%;"  ng-options="option for option in hodnoceniArray" ng-model="ma.bewerberInfo.bewertung2" class="form-control" id="bewertung2" placeholder="Bewertung 1-10" ng-change="bewerberFieldChanged('bewertung2')"></select>
						    </div>
						</div>
					    </div>
					    <div class="col-sm-4">
						<div class="form-group">
						    <label for="bewertung3" class="control-label">Arbeitsinteresse</label>
						    <div class="">
							<select style="width:50%;"  ng-options="option for option in hodnoceniArray" ng-model="ma.bewerberInfo.bewertung3" class="form-control" id="bewertung3" placeholder="Bewertung 1-10" ng-change="bewerberFieldChanged('bewertung3')"></select>
						    </div>
						</div>
					    </div>
					</fieldset>
					
					<fieldset>
					    <legend>Vorraussichtlich</legend>
					    <div class="form-group">
					    <label for="eintritt_datum" class="col-sm-1 control-label">Datum</label>
					    <div class="col-sm-3">
						<input ng-model="ma.bewerberInfo.eintritt_datum" ui-date="dateOptions" type="text" class="form-control" id="eintritt_datum" placeholder="ET-Plan" ng-change="bewerberFieldChanged('eintritt_datum')">
					    </div>
					    <label class="col-sm-2 control-label" for="oevorauss">OE</label>
					    <div class="col-sm-6">
						<ui-select ng-model="ma.bewerberInfo.oe_voraussichtlich" theme="bootstrap" close-on-select="true" title="vybrat OE" on-select="bewerberFieldOnSelect($item,$model,'oe_voraussichtlich')">
						<ui-select-match placeholder="vyberte OE">{{$select.selected.oe}}</ui-select-match>
						<ui-select-choices repeat="s.oe as s in oes.oeArray | filter:$select.search">
						    <small>
							<strong>{{s.oe}}</strong> {{s.beschreibung_cz}}
						    </small>
						</ui-select-choices>
						</ui-select>
					    </div>
					</div>
					</fieldset>
					
					<fieldset>
					    <legend>Sonst.</legend>
					</fieldset>

					<!--info vom-->
					<div class="form-group form-group-sm">
					    <label class="control-label col-sm-1" for="dpersstatus">info vom</label>
					    <div class="col-sm-5">
					    <ui-select multiple class="form-control" ng-model="ma.bewerberInfo.infoVomArray" theme="bootstrap" close-on-select="false" title="info vom"  ng-change="bewerberFieldChanged('infoVomArray')" on-select="bewerberFieldOnSelect($item,$model,'infoVomArray',true)">
						<ui-select-match placeholder="vyberte info">{{$item.text_kurz}} <small>({{$item.text_lang}})</small></ui-select-match>
					    <ui-select-choices repeat="s.id as s in infoVomArray | filter:$select.search">
						<small>
							<strong>{{s.text_kurz}}</strong>
						    </small>
						    <div><em>{{s.text_lang}}</em></div>
					    </ui-select-choices>
					    </ui-select>
					    </div>
					    <label class="control-label col-sm-1" for="fah">Fāhig.</label>
					    <div class="col-sm-5">
					    <ui-select multiple class="form-control" ng-model="ma.bewerberInfo.faehigkeitenArray" theme="bootstrap" close-on-select="false" title="Faehigkeiten" ng-change="bewerberFieldChanged('faehigkeitenArray')" on-select="bewerberFieldOnSelect($item,$model,'faehigkeitenArray',true)">
						<ui-select-match placeholder="schopnosti">{{$item.typ_beschreibung}} <small>({{$item.faeh_beschreibung}})</small></ui-select-match>
					    <ui-select-choices group-by="'typ_beschreibung'" repeat="s.faeh_id as s in bewFahigkeiten | filter:$select.search">
						    <small>
							<strong>{{s.faeh_abkrz}}</strong>
						    </small>
						    <div><em>{{s.faeh_beschreibung}}</em></div>
					    </ui-select-choices>
					    </ui-select>
					    </div>
					</div>
					
					
					
					
					<!--checkboxy-->
					<div class="checkbox col-sm-4">
				    <label>
					<input type="checkbox" ng-true-value="'1'" ng-false-value="'0'" ng-model="ma.bewerberInfo.arbamt_evidenz" ng-change="bewerberFieldChanged('arbamt_evidenz')">Arbeitsamtevidenz
				    </label>
				    </div>
				    <div class="checkbox col-sm-4">
				    <label>
					<input type="checkbox" ng-true-value="'1'" ng-false-value="'0'"  ng-model="ma.bewerberInfo.exekution" ng-change="bewerberFieldChanged('exekution')">Exekution / Insolvenz
				    </label>
				    </div>
				    <div class="checkbox col-sm-4">
				    <label>
					<input type="checkbox" ng-true-value="'1'" ng-false-value="'0'"  ng-model="ma.bewerberInfo.vermindertfah" ng-change="bewerberFieldChanged('vermindertfah')">Verminderte Erwerbsfaehigkeit
				    </label>
				    </div>
					    
					
					
				    </div>
				</div>
				<div class="col-sm-6">
				    <div class="form-group">
					<label class="control-label" for="bemerkung_sonst">Bemerkungen zum Gespraech / Sonst</label>
					<textarea class="form-control small" id="bemerkung_sonst" placeholder="Bemerkungen" rows="10" ng-model="ma.bewerberInfo.bemerkung_sonst"  ng-change="bewerberFieldChanged('bemerkung_sonst')"></textarea>
				    </div>
				    <div class="form-group">
					<label class="control-label" for="bemerkung_fah">Bemerkungen zum Faehigkeiten</label>
					<textarea class="form-control small" id="bemerkung_faehigkeiten" placeholder="Bemerkungen" rows="10" ng-model="ma.bewerberInfo.bemerkung_faehigkeiten" ng-change="bewerberFieldChanged('bemerkung_faehigkeiten')"></textarea>
				    </div>
				    <!--<pre>{{ma.bewerberInfo|json}}</pre>-->
				</div>
			    </div>
			</div>
		    </div>
		</div>
		
		<!--panel lohninfo ----------------------------------------- -->
		<div ng-show="showPanel.lohninfo" id="lohninfo">
		    <div class="panel panel-success">
			<div class="panel-heading">
			    Lohninfo
			    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['lohninfo_panel']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			</div>
			<div class="panel-body">
			    <div class="row">
				<div class="col-sm-9">
				    <div class="form-horizontal">
					<fieldset>
					    <legend>Premie</legend>
					    <div class="row">
						<!--leistungspremie-->
						<div class="checkbox col-sm-3">
						    <label>
							<input type="checkbox" ng-true-value="'1'" ng-false-value="'0'" ng-model="ma.maInfo.premie_za_vykon"   ng-change="dpersFieldChanged('premie_za_vykon')">Leistungspraemie
						    </label>
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['premie_za_vykon']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
						<!--qpremie_akkord-->
						<div class="checkbox col-sm-3">
						    <label>
							<input type="checkbox" ng-true-value="'1'" ng-false-value="'0'" ng-model="ma.maInfo.qpremie_akkord"   ng-change="dpersFieldChanged('qpremie_akkord')">QPraemie-Akkord
						    </label>
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['qpremie_akkord']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
						<!--qtl premie-->
						<div class="checkbox col-sm-3">
						    <label>
							<input type="checkbox" ng-true-value="'1'" ng-false-value="'0'" ng-model="ma.maInfo.premie_za_3_mesice"   ng-change="dpersFieldChanged('premie_za_3_mesice')">QuartPraemie
						    </label>
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['premie_za_3_mesice']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
						<!--a premie-->
						<div class="checkbox col-sm-3">
						    <label>
							<input type="checkbox" ng-true-value="'1'" ng-false-value="'0'" ng-model="ma.maInfo.a_praemie"   ng-change="dpersFieldChanged('a_praemie')">A-Praemie
						    </label>
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['a_praemie']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
					    </div>
					    <div class="row">
						<div class="checkbox col-sm-3">
						    <label>
							<input type="checkbox" ng-true-value="'1'" ng-false-value="'0'" ng-model="ma.maInfo.bewertung"   ng-change="dpersFieldChanged('bewertung')">Bewertung
						    </label>
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['bewertung']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
						<div class="checkbox col-sm-3">
						    <label>
							<input type="checkbox" ng-true-value="'1'" ng-false-value="'0'" ng-model="ma.maInfo.qpremie_zeit"   ng-change="dpersFieldChanged('qpremie_zeit')">QPraemie-Zeit
						    </label>
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['qpremie_zeit']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
						<div class="checkbox col-sm-3">
						    <label>
							<input type="checkbox" ng-true-value="'1'" ng-false-value="'0'" ng-model="ma.maInfo.MAStunden"   ng-change="dpersFieldChanged('MAStunden')">MAStunden zaehlen
						    </label>
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['MAStunden']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
						<div class="checkbox col-sm-3">
						    <label>
							<input ng-disabled="ma.maInfo.a_praemie=='0'" type="checkbox" ng-true-value="'1'" ng-false-value="'0'" ng-model="ma.maInfo.a_praemie_st"   ng-change="dpersFieldChanged('a_praemie_st')">A-Praemie-St
						    </label>
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['a_praemie_st']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
					    </div>
					</fieldset>
				    </div>
				</div>
				<div class="col-sm-3">
				    <div class="form-horizontal">
					<fieldset>
					    <legend>Adaptace</legend>
					    <div class="row">
						<div class="checkbox col-sm-12">
						    <label>
							<input type="checkbox" ng-true-value="'1'" ng-false-value="'0'" ng-model="ma.maInfo.einarb_zuschlag"   ng-change="dpersFieldChanged('einarb_zuschlag')">Adaptace
						    </label>
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['einarb_zuschlag']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
						
					    </div>
					    <div class="row">
						<label for="adaptace_bis" class="col-sm-2 control-label">bis</label>
						<div class="col-sm-10">
						    <input ng-model="ma.maInfo.adaptace_bis" ui-date="dateOptions" type="text" class="form-control" id="adaptace_bis" placeholder="adaptace bis"  ng-change="dpersFieldChanged('adaptace_bis')">
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['adaptace_bis']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
						
					    </div>
					</fieldset>
				    </div>
				</div>
			    </div>
			    <div class="row">
				<div class="col-sm-12">
				    <div class="form-horizontal">
					<fieldset>
					    <legend>Hodinova mzda, leistfaktor</legend>
					    <div class="row">
						<div class="form-group">
						    <label for="lohnfaktor" class="control-label col-sm-2">Zeitlohn [Kč/hod]</label>
						    <div class="col-sm-1">
							<input ng-model="ma.maInfo.lohnfaktor" type="text" class="form-control text-right" id="lohnfaktor" placeholder="hodinova mzda"  ng-change="dpersFieldChanged('lohnfaktor')">
						    </div>
						</div>
						<apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['lohnfaktor_input']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						<div class="form-group">
						    <label for="leistfaktor" class="control-label col-sm-2">Leist.faktor</label>
						    <div class="col-sm-1">
							<input ng-model="ma.maInfo.leistfaktor" type="text" class="form-control text-right" id="leistfaktor" placeholder="leistungsfaktor"  ng-change="dpersFieldChanged('leistfaktor')">
						    </div>
						</div>
						<apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['leistfaktor_input']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						<div class="form-group">
						    <label for="lohnabrechtyp" class="col-sm-2 control-label">typ zpracování mzdy</label>
						    <div class="col-sm-2">
							<select title="lohnabrechtyp" ng-options="option.lohntyp+' '+option.beschr_kurz for option in lohnabrechtypArray track by option.lohntyp" ng-model="lohnabrechtyp" class="form-control" ng-change="dpersFieldChanged('lohnabrechtyp')"></select>
						    </div>
						</div>
						<apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['lohnabrechtyp']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
					    </div>
					</fieldset>
				    </div>
				</div>
			    </div>	
			</div>
		    </div>
		</div>
		
		<!--panel aplinfo ----------------------------------------- -->
		<div ng-show="showPanel.aplinfo" id="aplinfo">
		    <div class="panel panel-success">
			<div class="panel-heading">
			    Aplinfo
			    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['aplinfo_panel']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			</div>
			<div class="panel-body">
			    <div class="row">
				<div class="col-sm-12">
				    <div class="form-horizontal">
					<fieldset>
					    <legend>Regel</legend>
					    <div class="row">
						<label for="regelarbzeit" class="col-sm-2 control-label">Regelarbstunden</label>
						<div class="col-sm-1">
						    <input ng-model="ma.maInfo.regelarbzeit" type="text" class="form-control text-right" id="regelarbzeit" placeholder="regelarbzeit"  ng-change="dpersFieldChanged('regelarbzeit')">
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['regelarbzeit']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
						<label for="regeloe" class="col-sm-1 control-label">RegelOE</label>
						<div class="col-sm-2">
						    <select title="regeloe" ng-options="option for option in oesArray" ng-model="ma.maInfo.regeloe" class="form-control" ng-change="dpersFieldChanged('regeloe')"></select>
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['regeloe']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
						<label for="alteroe" class="col-sm-2 control-label">Alternativ OE</label>
						<div class="col-sm-2">
						    <select title="alteroe" ng-options="option for option in oesArray" ng-model="ma.maInfo.alteroe" class="form-control" ng-change="dpersFieldChanged('alteroe')"></select>
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['alteroe']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
						<label for="anwvzkd" class="col-sm-1 control-label">Anw.->VzKd</label>
						<div class="col-sm-1">
						    <input ng-model="ma.maInfo.anwvzkd_faktor" type="text" class="form-control text-right" id="anwvzkd_faktor" placeholder="anwvzkd_faktor"  ng-change="dpersFieldChanged('anwvzkd_faktor')">
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['anwvzkd_faktor']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
					    </div>
					</fieldset>
				    </div>				    
				</div>
			    </div>
			    <div class="row">
				<div class="col-sm-12">
				    <div class="form-horizontal">
					<fieldset>
					    <legend>Autoleistung</legend>
					    <div class="row">
						<!--leistungspremie-->
						<div class="checkbox col-sm-2">
						    <label>
							<input type="checkbox" ng-true-value="'1'" ng-false-value="'0'" ng-model="ma.maInfo.auto_leistung" ng-change="dpersFieldChanged('auto_leistung')">Autoleistung
						    </label>
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['auto_leistung']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
						<label for="auto_leistung_abgnr" class="col-sm-2 control-label">Autoleistung Abgnr</label>
						<div class="col-sm-3">
						    <select title="auto_leistung_abgnr" ng-options="option.abgnr+' '+option.abgnrname for option in autoleistungAbgnrArray track by option.abgnr" ng-model="autoleistungAbgnr" class="form-control" ng-change="dpersFieldChanged('auto_leistung_abgnr')"></select>
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['auto_leistung_abgnr']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
						<label for="anwgruppe" class="col-sm-2 control-label">Anw. Gruppe</label>
						<div class="col-sm-2">
						    <select title="anwgruppe" ng-options="option.anwgruppe+' '+option.bezeichnung for option in anwgruppenArray track by option.anwgruppe" ng-model="anwgruppe" class="form-control" ng-change="dpersFieldChanged('anwgruppe')"></select>
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['anwgruppe']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
					    </div>
					</fieldset>
				    </div>
				</div>
			    </div>
			    <div class="row">
				<div class="col-sm-12">
				    <div class="form-horizontal">
					<fieldset>
					    <legend>Korektur</legend>
					    <div class="row">
						<div class="checkbox col-sm-6">
						    <label>
							<input type="checkbox" ng-true-value="'1'" ng-false-value="'0'" ng-model="ma.maInfo.kor" ng-change="dpersFieldChanged('kor')">PersNr=KORREKTUR
						    </label>
						    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['kor']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
						</div>
					    </div>
					</fieldset>
				    </div>
				</div>
			    </div>
			</div>
		    </div>
		</div>
		<!--panel dokumenty ----------------------------------------- -->
		<div ng-show="showPanel.dokumenty" id="dokumenty">
		    <div class="panel panel-success">
			<div class="panel-heading">
			    Dokumenty
			    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['dokumenty_panel']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			</div>
			<div class="panel-body">
			    <div class="row">
				<div class="col-sm-12">
				    <div>
					<button ngf-select="uploadMAFiles($files,$invalidFiles,selectedButton)" type="button" class="btn btn-small btn-info" aria-label="Left Align">
					    <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>přidat dokument
					</button>
					<div ng-if="files.length>0">
					    <ul class="list-group">
						<li class="list-group-item" ng-repeat="f in files" style="font:smaller">{{f.name}}
						    <div class="progress">
						    <div aria-valuenow="{{f.progress}}" aria-valuemin="0" aria-valuemax="100" class="progress-bar progress-bar-warning" role="progressbar" style="width: {{f.progress}}%">
						    {{f.progress}} %
						    </div>
						    </div>
						</li>
					    </ul>
					</div>
				    </div>
				</div>
				<div class="col-sm-12">
					<fieldset>
					    <legend>MA Dokumenty</legend>
					    <table class="table table-condensed table-striped table-hover">
						<caption>{{maDocPath}}</caption>
						<thead>
						    <tr>
							<th>jmeno souboru</th>
							<th>cas posl. zmeny</th>
							<th class="text-right">velikost</th>
						    </tr>
						</thead>
						<tbody>
						    <tr ng-repeat="d in dokumentyArray">
							<td><a ng-href="{{d.url}}">{{d.filename}}</a></td>
							<td>{{d.mtimeF}}</td>
							<td class="text-right">{{d.size}}</td>
						    </tr>
						</tbody>
					    </table>
					</fieldset>
				</div>
				<div class="col-sm-12">
					<fieldset>
					    <legend>šablony</legend>
					    <table class="table table-condensed table-striped table-hover">
						<caption><button ng-click="sablona2Doku()" type="button" class="btn btn-small btn-info">šablona->pers. Dokument</button>&nbsp;{{sablonyPath}}</caption>
						<thead>
						    <tr>
							<th>výběr</th>
							<th>jmeno souboru</th>
							<th>cas posl. zmeny</th>
							<th class="text-right">velikost</th>
						    </tr>
						</thead>
						<tbody>
						    <tr ng-repeat="d in sablonyArray">
							<td><input type="checkbox" ng-model="d.selected"/></td>
							<td><a ng-href="{{d.url}}">{{d.filename}}</a></td>
							<td>{{d.mtimeF}}</td>
							<td class="text-right">{{d.size}}</td>
						    </tr>
						</tbody>
					    </table>
					</fieldset>
				</div>
			    </div>
			</div>
		    </div>
		    <div class="row">
			<div class="col-sm-12">
			    <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#variablesHelp" aria-expanded="false" aria-controls="variablesHelp">
			    zobrazit promenne
			    </button>
			    <div class="collapse" id="variablesHelp">
				<div class="well">
				    <table class="table table-condensed table-striped table-hover">
					<thead>
					    <tr>
						<th>promenna</th>
						<th>popis</th>
						<th>hodnota</th>
					    </tr>
					</thead>
					<tbody>
					    <tr ng-repeat="(varname,v) in templateVariables">
						<td><span>${</span>{{varname}}<span>}</span></td>
						<td>{{v.label}}</td>
						<td>{{v.value}}</td>
					    </tr>
					</tbody>
				    </table>
				</div>
			    </div>
			</div>
		    </div>
		</div>

		<!-------------------------------------------------------------------->
		<!--panel kvalifikace-->
		<div ng-show="showPanel.kvalifikace" id="kvalifikace">
		    <div class="panel panel-success">
			<div class="panel-heading">
			    kvalifikace
			    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['kvalifikace_panel']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			</div>
			<div class="panel-body">
			    <div class="row">
				<div class="col-md-12">
				    <div class="panel panel-primary">
					<div class="panel-heading">OE - kvalifikační požadavky</div>
					<table class="table table-condensed table-responsive table-striped table-hover">
					    <thead>
						<tr   ng-show="securityInfo.showArray['kvalifikace_add_row']" class="bg-info no-print">
						    <th colspan="1">
							<select class="form-control" id="oekvalifikace" name="oekvalifikace" ng-model="oekvalifikace">
							    <option ng-if="oe.oe != '*'" ng-repeat="oe in oes.oeArray" value="{{oe.oe}}">{{oe.oe}} - {{oe.beschreibung_cz}}</option>
							</select>
						    </th>
						    <th>
							<input type="text" ng-model="kvalifikacebewertung" class="form-control input-sm text-right" placeholder="hodnoceni">
						    </th>
						    <th>
							<input type="text" ng-model="kvalifikacepoznamka" class="form-control input-sm" placeholder="poznamka">
						    </th>
						    <th>
							<input ng-model="kvalifikaceGiltAb" ui-date="dateOptions" type="text" class="form-control" id="kvalifikacegiltab" placeholder="plati od">
						    </th>
						    <th>
							&nbsp;
						    </th>
						    <th>
							<button ng-click="addKvalifikace()" id='add_kvalifikace' type="button" class="btn btn-sm btn-primary btn-block">+</button>
						    </th>
						</tr>
						<tr class="bg-info">
						    <th colspan="1" >oe</th>
						    <th colspan="1" class="text-right">hodnoceni</th>
						    <th colspan="1">poznamka</th>
						    <th colspan="1">plati od</th>
						    <th colspan="1" >user</th>
						    <th colspan="1" ></th>
						</tr>
					    </thead>
					    <tbody>
						<tr ng-repeat="pa in persKvalifikaceArray">
						    <td >{{pa.oe}}</td>
						    <td class="">
							<input ng-readonly="!securityInfo.editArray['kvalifikace_bewertung_input']" ng-change="dperskvalifikaceChanged(pa, 'bewertung')" type="text" ng-model="pa.bewertung" class="form-control input-sm  text-right" placeholder="hodnoceni">
							<apl-help el="hIArray['kvelifikace_bewertung_input']" showadmininfo="showhI"></apl-help>
						    </td>
						    <td class="">
							<input ng-readonly="!securityInfo.editArray['kvalifikace_poznamka_input']" ng-change="dperskvalifikaceChanged(pa, 'poznamka')" type="text" ng-model="pa.poznamka" class="form-control input-sm" placeholder="poznámka">
							<apl-help el="hIArray['kvalifikace_poznamka_input']" showadmininfo="showhI"></apl-help>
						    </td>
						    <td class="">
							{{pa.gilt_ab}}
						    </td>
						    <td class="">
							{{pa.user}}
						    </td>
						    <td class="">
							<button  ng-show="securityInfo.showArray['kvalifikace_delete_row']" title="smazat" type="button" class="btn btn-block no-print" ng-click="deleteDpersKvalifikace(pa)">
							    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
							</button>
							<apl-help el="hIArray['kvalifikace_delete_row']" showadmininfo="showhI"></apl-help>
						    </td>
						</tr>
					    </tbody>
					</table>
				    </div>
				</div>
			    </div>
			</div>
		    </div>
		</div>
		
		<!--panel identifikatory-->
		<div ng-show="showPanel.identifikatory" id="identifikatory">
		    <div class="panel panel-success">
			<div class="panel-heading">
			    identifikátory
			    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['identifikatory_panel']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			</div>
			<div class="panel-body">
			    <div class="row">
				<div class="col-md-12">
				    <div class="panel panel-primary">
					<div class="panel-heading">seznam přidělených identifikátorů</div>
					<table class="table table-condensed table-responsive table-striped table-hover">
					    <thead>
						<tr   class="bg-info no-print">
						    <th colspan="1">
							<select ng-change="updateIdentArray('oe')" class="form-control input-sm" id="oeidentifikator" name="oeidentifikator" ng-model="oeidentifikator">
							    <option ng-repeat="oe in oes.oeIdentArray" value="{{oe.oe}}">{{oe.oe}}</option>
							</select>
						    </th>
						    <th>
							<select ng-change="updateIdentArray('kunde')" class="form-control input-sm" id="kundeidentifikator" name="kundeidentifikator" ng-model="kundeidentifikator">
							    <option ng-repeat="k in kundeIdentArray" value="{{k.kunde}}">{{k.kunde}}</option>
							</select>
						    </th>
						    <th>
							<select class="form-control input-sm" id="identifikator" name="identifikator" ng-model="identifikator">
							    <option ng-repeat="i in identifikatorArray" value="{{i.iident}}">{{i.iident}}</option>
							</select>
						    </th>
						    <th>
							<input ng-model="identifikatorvydano" ui-date="dateOptions" type="text" class="form-control input-sm" id="identifikatorvydano" placeholder="vydano">
						    </th>
						    <th>
							&nbsp;
						    </th>
						    <th>
							<input ng-model="identifikatorpoznamka" type="text" class="form-control input-sm" id="identifikatorpoznamka" placeholder="poznamka">
						    </th>
						    <th>
							<button ng-click="addIdentifikator()" id='add_identifikator' type="button" class="btn btn-sm btn-primary btn-block">+</button>
						    </th>
						</tr>
						<tr class="bg-info">
						    <th colspan="1" >oe</th>
						    <th colspan="1" class="text-right">zákazník</th>
						    <th colspan="1">identifikátor</th>
						    <th colspan="1">vydáno</th>
						    <th colspan="1">vráceno</th>
						    <th colspan="1">poznámka</th>
						    <th colspan="1" ></th>
						</tr>
					    </thead>
					    <tbody>
						<tr ng-repeat="pa in persIdentifikatoryArray track by pa.id">
						    <td >{{pa.oe}}</td>
						    <td class="text-right">
							{{pa.kunde}}
						    </td>
						    <td class="">
							{{pa.identifikator}}
						    </td>
						    <td class="">
							{{pa.vydano}}
						    </td>
						    <td class="">
							<input ng-change="dpersidentifikatoryChanged(pa, 'vraceno')" ng-model="pa.vraceno" ui-date="dateOptions" type="text" class="form-control" placeholder="datum vrácení">
						    </td>
						    <td class="">
							<input ng-change="dpersidentifikatoryChanged(pa, 'poznamka')" type="text" ng-model="pa.poznamka" class="form-control input-sm" placeholder="poznámka">
						    </td>
						    <td class="">
							<button title="smazat" type="button" class="btn btn-block no-print" ng-click="addIdentifikator(pa)">
							    <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
							</button>
						    </td>
						</tr>
					    </tbody>
					</table>
				    </div>
				</div>
			    </div>
			</div>
		    </div>
		</div>
		
		<!--inventar-->
		<div ng-show="showPanel.inventar" id="inventar">
		    <div class="panel panel-default">
			<div class="panel-heading">
			    Inventář
			    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['inventar_panel']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			</div>
			<div class="panel-body">
			    <div class="row">
				<div class="col-md-12">
				    <table class="table table-condensed table-responsive table-striped table-hover">
					<thead>
					    <tr   class="bg-info no-print">
						<th colspan="7">
					<ui-select
					    ng-model="inventar.selected" 
					    ng-disabled="disabled" 
					    reset-search-input="true" 
					    theme="bootstrap"
					    ><ui-select-match placeholder="vyhledani inventare (podle typu, cisla, popisu, mistnosti)">{{$select.selected.inventartyp}} - {{$select.selected.cislo}} {{$select.selected.popis}}</ui-select-match>
					    <ui-select-choices group-by="'inventartyp'" repeat="p in inventarArray track by $index"
							       refresh="refreshInventar($select.search)"
							       refresh-delay="0">
						<div ng-bind-html="p.formattedInventar | highlight: $select.search"></div>
					    </ui-select-choices>
					</ui-select>
					</th>
					<th>
					<div ng-show="inventar.selected.pocetpotomku > 0 || inventar.selected.pocetrodicu > 0" class="checkbox">
					    <label>
						<!--povolit pridavani potomku / rodicu-->
						<input ng-model="addparents" type="checkbox"> přidat 
						<span ng-show="inventar.selected.pocetrodicu > 0">rodiče <span class="bg-warning">{{inventar.selected.rodic}}</span></span>
						<span ng-show="inventar.selected.pocetpotomku > 0">potomky <span class="bg-warning">{{inventar.selected.potomek}}</span></span>
					    </label>
					</div>

					<button ng-click="addInventar(inventar.selected, null)" id='add_inventar' type="button" class="btn btn-sm btn-primary btn-block">+</button>
					</th>
					</tr>
					<tr class="bg-info">
					    <th colspan="1" >typ</th>
					    <th colspan="1" >cislo</th>
					    <th colspan="1" >popis</th>
					    <th colspan="1" >pozn</th>
					    <th colspan="1" >vydej datum</th>
					    <th colspan="1" >vraceno datum</th>
					    <th colspan="1" >editoval</th>
					    <th colspan="1" >stamp</th>
					</tr>
					</thead>
					<tbody>
					    <tr ng-repeat="pa in persInventarArray" ng-class="{'text-muted':pa.vydej_datum1 !== null}">
						<td >{{pa.inventar_typ}}</td>
						<td class="">{{pa.inventar_cislo}}</td>
						<td class="">{{pa.inventar_popis}}</td>
						<td class="">
						    <input ng-change="dpersinventarChanged(pa, 'pozn')" type="text" ng-model="pa.pozn" class="form-control input-sm">
						</td>
						<td class="">
						    <input ng-change="dpersinventarChanged(pa, 'vydej_datum')" ng-disabled="pa.vraceno_datum !== null" ng-blur="" ng-model="pa.vydej_datum1" ui-date="dateOptions" type="text" class="form-control" id="" placeholder="vydej">
						    <!--{{pa.vydej_datum}}-->
						</td>
						<td class="">
						    <input ng-change="dpersinventarChanged(pa, 'vraceno_datum')" ng-disabled="pa.vraceno_datum !== null" ng-blur="" ng-model="pa.vraceno_datum1" ui-date="dateOptions" type="text" class="form-control" id="" placeholder="vraceno">
						</td>
						<td title="naposledy editoval" class="">{{pa.user}}</td>
						<td class="">
						    {{pa.stamp}}
						    <button title="smazat" type="button" ng-if="isAdmin" class="btn btn-block no-print" ng-click="deleteDpersInventar(pa)">
							<span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
						    </button>
						</td>
					    </tr>
					</tbody>
				    </table>
				</div>
			    </div>
			</div>
		    </div>
		</div>
		
		
		<!--majetek-->
		<div ng-show="showPanel.majetek" id="majetek">
		    <div class="panel panel-default">
			<div class="panel-heading">
			    Majetek
			    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['majetek_panel']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			</div>
			<div class="panel-body">
			    <div class="row">
				<div class="col-md-12">
				    <table class="table table-condensed table-responsive table-striped table-hover">
					<thead>
					    <tr class="bg-info no-print">
						<th colspan="4">
					<ui-select
					    ng-model="majetek.selected" 
					    ng-disabled="disabled" 
					    reset-search-input="true" 
					    theme="bootstrap"
					    close-on-select="true"
					    on-select="majetekSelectAction($item,$model)"
					    ><ui-select-match placeholder="vyhledani majetku">{{$select.selected.CISLO}} - {{$select.selected.POPIS}}</ui-select-match>
					    <ui-select-choices repeat="p in majetekArray track by $index"
							       refresh="refreshMajetek($select.search)"
							       refresh-delay="0">
						<!--<div>{{p|json}}</div>-->
						<div ng-bind-html="p.CISLO + ' ' + p.POPIS + ' ' + p.TEXT_2 + ' (' + p.POZNAMKA + ')'| highlight: $select.search"></div>
					    </ui-select-choices>
					</ui-select>
					</th>
					<th colspan="5">
					    <button ng-show="majetek.selected.CISLO.length>0" ng-click="addMajetek(majetek.selected)" id='add_majetek' type="button" title="pridat majetek" class="btn btn-sm btn-primary btn-block">+ ({{majetek.selected.CISLO}})</button>
					</th>
					
					</tr>
					<tr class="bg-info">
					    <th colspan="1" >AMNr/InvNr (popis)</th>
					    <th colspan="1" >OE</th>
					    <th colspan="1" ></th>
					    <th colspan="1" >datum</th>
					    <th colspan="1" >Ausgabe Stk</th>
					    <th colspan="1" >Rueckgabe Stk</th>
					    <th colspan="1" >InvNr</th>
					    <th colspan="1" >Bemerkung</th>
					    <th colspan="1" ></th>
					</tr>
					</thead>
					<tbody>
					    <tr ng-repeat="pa in majetekPersArray" ng-class="">
						<td >{{pa.AMNr}} ({{pa.popismajetku}})</td>
						<td class="">{{pa.oe}}</td>
						<td class=""></td>
						<td class="">
						    <input ng-model="pa.Datum" ui-date="dateOptions" type="text" class="form-control" placeholder="datum"  ng-change="updateAmBewDatum(pa)">
						</td>
						<td class="">{{pa.AusgabeStk}}</td>
						<td class="">{{pa.RueckgabeStk}}</td>
						<td class="">{{pa.invnr}}</td>
						<td class="">
						    <input type="text" class="form-control input-xs" ng-model="pa.Bemerkung" ng-change="updateAmbewBemerkung(pa)" />
						</td>
						<td class="">
						    <button ng-if="(pa.AusgabeStk>pa.RueckgabeStk)&&(pa.canreturn)" title="vratit" type="button" class="btn btn-block no-print" ng-click="vratitMajetek(pa)">
							<span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>vrátit
						    </button>
						</td>
					    </tr>
					</tbody>
				    </table>
				</div>
			    </div>
			</div>
		    </div>
		</div>
		
		<!--hfpremie-->
		<div ng-show="showPanel.hfpremie" id="hfpremie">
		    <div class="panel panel-info">
			<div class="panel-heading">
			    HF Premie
			    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['hfpremie_panel']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			</div>
			<div class="panel-body">
			    <div class="row">
				<div class="form-group col-md-2 form-group-sm">
				    <label class="control-label"  for="hfpremievon">Von:</label>
				    <div class="input-group">
					<input ng-change="premieDatumChanged('von')" ng-model="hfPremieVon" ui-date="dateOptions" type="text" class="form-control" id="hfpremievon" placeholder="von">
				    </div>
				</div>
				<div class="form-group col-md-2 form-group-sm">
				    <label class="control-label"  for="hfpremiebis">Bis:</label>
				    <div class="input-group">
					<input ng-change="premieDatumChanged('bis')" ng-model="hfPremieBis" ui-date="dateOptions" type="text" class="form-control" id="hfpremiebis" placeholder="bis">
				    </div>
				</div>

				<div class="col-sm-6">
				    <table class="table table-condensed table-responsive" ng-if="hfPremieArray[hfPremieArray.persnrArray[0].persnr].persinfo.hfkriteria != null">
					<tbody>
					    <tr class="bg-success">
						<td>repkosten / vzkd</td>
						<td><=</td>
						<td class="text-right">{{hfPremieArray[hfPremieArray.persnrArray[0].persnr].persinfo.hfkriteria.grenzedown|numeraljs:'0,0.00'}}</td>
						<td>premie</td>
						<td>=</td>
						<td class="text-right">{{hfPremieArray[hfPremieArray.persnrArray[0].persnr].persinfo.hfkriteria.pct_plus}} %</td>
						<td>z Sum vzkd</td>
					    </tr>
					    <tr class="bg-warning">
						<td>repkosten / vzkd</td>
						<td>>=</td>
						<td class="text-right">{{hfPremieArray[hfPremieArray.persnrArray[0].persnr].persinfo.hfkriteria.grenzeup|numeraljs:'0,0.00'}}</td>
						<td>premie</td>
						<td>=</td>
						<td class="text-right">-{{hfPremieArray[hfPremieArray.persnrArray[0].persnr].persinfo.hfkriteria.pct_minus}} %</td>
						<td>z Sum vzkd</td>
					    </tr>
					    <tr class="bg-danger">
						<td>repkosten / vzkd</td>
						<td>>=</td>
						<td class="text-right">{{hfPremieArray[hfPremieArray.persnrArray[0].persnr].persinfo.hfkriteria.grenze_reparatur|numeraljs:'0,0.00'}}</td>
						<td>premie</td>
						<td>=</td>
						<td class="text-right">-{{hfPremieArray[hfPremieArray.persnrArray[0].persnr].persinfo.hfkriteria.pct_reparatur}} %</td>
						<td>z repkosten</td>
					    </tr>
					</tbody>
				    </table>
				    <h3  ng-if="hfPremieArray[hfPremieArray.persnrArray[0].persnr].persinfo.hfkriteria == null"><span class="label label-warning">pro OE:{{ma.oeInfo.oe}} se HF premie nepočítá.</span></h3>
				</div>

			    </div>
			    <div ng-show="hfPremieArray !== null" class="row">
				<div class="col-sm-12">
				    <table class="table table-condensed table-responsive table-striped table-hover">
					<thead>
					<th class="bg-info">&nbsp;</th>
					<th class="bg-info text-right">Suma [von-bis]</th>
					<th class="bg-info text-right" ng-repeat="(jm, pocet) in hfPremieArray.jahrmonatArray">{{jm}}</th>
					</thead>
					<tbody>
					    <tr>
						<th>
						    vzaby
						</th>
						<th class="text-right">
						    {{sumHFPremieRow(hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate,'vzaby')|numeraljs:'0,0'}}
						</th>
						<td class="text-right bg-{{p.prclass}}" ng-repeat="p in hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate">
						    {{p.vzaby|numeraljs:'0,0'}}
						</td>
					    </tr>
					    <tr>
						<th>
						    vzkd S0011
						</th>
						<th class="text-right">
						    {{sumHFPremieRow(hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate,'vzkdS0011')|numeraljs:'0,0'}}
						</th>
						<td class="text-right bg-{{p.prclass}}" ng-repeat="p in hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate">
						    {{p.vzkdS0011|numeraljs:'0,0'}}
						</td>
					    </tr>
					    <tr>
						<th>
						    vzkd S0051
						</th>
						<th class="text-right">
						    {{sumHFPremieRow(hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate,'vzkdS0051')|numeraljs:'0,0'}}
						</th>
						<td class="text-right bg-{{p.prclass}}" ng-repeat="p in hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate">
						    {{p.vzkdS0051|numeraljs:'0,0'}}
						</td>
					    </tr>
					    <tr>
						<th>
						    Sum vzkd
						</th>
						<th class="text-right">
						    {{sumHFPremieRow(hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate,'vzkd')|numeraljs:'0,0'}}
						</th>
						<td class="text-right bg-{{p.prclass}}" ng-repeat="p in hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate">
						    {{p.vzkd|numeraljs:'0,0'}}
						</td>
					    </tr>
					    <tr>
						<th>
						    repkosten
						</th>
						<th class="text-right">
						    {{sumHFPremieRow(hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate,'repkosten')|numeraljs:'0,0'}}
						</th>
						<td class="text-right bg-{{p.prclass}}" ng-repeat="(mo, p) in hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate">
						    <!--<span id="repkosten_{{hfPremieArray.persnrArray[0].persnr}}_{{mo}}" style="cursor: pointer;" ng-click="monthValueClicked($event,p)">-->
						    {{p.repkosten|numeraljs:'0,0'}}
						    <!--</span>-->
						    <span ng-if="p.repkosten != 0" title="zobrazit detail k hodnote" id="repkosten_{{hfPremieArray.persnrArray[0].persnr}}_{{mo}}" style="cursor: pointer;" ng-click="monthValueClicked($event, p)" class="glyphicon glyphicon-info-sign bg-success text-success" aria-hidden="true"></span>
						</td>
					    </tr>
					    <tr>
						<th>
						    repkosten/vzkd
						</th>
						<th class="text-right">
						    {{(sumHFPremieRow(hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate,'vzkd')!==0?sumHFPremieRow(hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate,'repkosten')/sumHFPremieRow(hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate,'vzkd'):0)|numeraljs:'0,0.00'}}
						</th>
						<td class="text-right bg-{{p.prclass}}" ng-repeat="p in hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate">
						    {{p.faktor|numeraljs:'0,0.00'}}
						</td>
					    </tr>
					    <tr>
						<th>
						    premie - vypoc.
						</th>
						<th class="text-right">
						    {{sumHFPremieRow(hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate,'premie')|numeraljs:'0,0'}}
						</th>
						<td class="text-right bg-{{p.prclass}}" ng-repeat="p in hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate">
						    {{p.premie}}
						</td>
					    </tr>
					    <tr>
						<th>
						    premie - skut.
						</th>
						<th class="text-right">
						    {{sumHFPremieRow(hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate,'skutBetrag')|numeraljs:'0,0'}}
						</th>
						<td ng-class="{'bg-success':p.skutBetrag > 0, 'bg-danger':p.skutBetrag < 0}" class="text-right" ng-repeat="(m, p) in hfPremieArray[hfPremieArray.persnrArray[0].persnr].monate">
						    <div class="input-group input-group-sm">
							<span class="input-group-btn input-group-sm">
							    <button ng-if="p.locked && isAdmin == true" class="btn btn-default no-print" title="odemkne hodnotu" type="button" ng-click="unlockHfPremie(p, m)">
								<span class="text-success glyphicon glyphicon-asterisk"></span>
							    </button>
							    <button ng-if="p.locked == false" class="btn btn-default no-print" title="zamkne hodnotu" type="button" ng-click="lockHfPremie(p, m)">
								<span class="text-success glyphicon glyphicon-lock"></span>
							    </button>
							    <!--							    <button ng-disabled="p.locked" class="btn btn-default no-print" title="{{p.locked?'zamknuto':'odemknuto, stisknutim hodnotu zamknete'}}" type="button" ng-click="lockHfPremie(p,m)">
															    <span ng-if="p.locked" class="glyphicon glyphicon-lock"></span>
															    <span ng-show="p.locked===true" class="text-danger glyphicon glyphicon-lock"></span>
															    <span ng-show="p.locked===false" class="text-success glyphicon glyphicon-lock"></span>
															    <span ng-if="!p.locked" class="glyphicon glyphicon-unlock"></span>
															</button>-->
							</span>
							<input ng-class="{'bg-success':p.skutBetrag > 0, 'bg-danger':p.skutBetrag < 0}" ng-disabled="p.locked" ng-change="skutPremieChanged(p, m)" type="text" ng-dblclick="updateBemerkung('dperspremie', p.skutId)" ng-model="p.skutBetrag" class="form-control input-sm text-right" title="naposledy editoval :{{p.last_edit}}" id="hfprem_{{hfPremieArray.persnrArray[0].persnr}}_{{m}}" />
							<div ng-if="p.bemerkung.length > 0" class="input-group-addon input-group-sm no-print">
							    <span title="poznámka" id="comment_{{hfPremieArray.persnrArray[0].persnr}}_{{m}}" style="cursor: pointer;" ng-click="commentClicked($event, p)" class="glyphicon glyphicon-comment text-info" aria-hidden="true"></span>
							</div>

						    </div>
						    <div ng-show="bemerkung['dperspremie'][p.skutId].show">
							<textarea ng-change="bemerkungChanged('dperspremie', p.skutId, p)" class="form-control bg-warning" ng-model="bemerkung['dperspremie'][p.skutId].poznamka"></textarea>
						    </div>
						</td>
					    </tr>
					</tbody>
				    </table>
				</div>
			    </div>
			</div>
		    </div>
		</div>
		<div ng-show="showPanel.osobnihodnoceni" id="osobnihodnoceni">
		    <div class="panel panel-primary">
			<div class="panel-heading">
			    osobní hodnocení
			    <apl-help editable="isEditor" helpTextUpdater="./updateHelpText.php" el="hIArray['osobnihodnoceni_panel']" showhelp="showHelp" showadmininfo="showhI"></apl-help>
			</div>
			<div class="panel-body">
			    <div ng-show="hasOEHodnoceni === false || hasOEHodnoceni == undefined" class="row">
				<div class="col-sm-12">
				    <div class="alert alert-warning">
					<h4>OE <span class="label label-info">{{ma.oeInfo.oe}}</span> nemá žádné faktory k hodnocení :-(</h4>
				    </div>
				</div>
			    </div>
			    <!--<div ng-show="osobniHodnoceniArray !== null" class="row">-->
<!--			    i v pripade, ze nemam zadne pole s osobnim hodnocenim zobrazim vyber datumu, abych se mohl dostat nekam
			    kde nejake hodnoceni mam-->
			    <div class="row">
				<div class="form-group col-md-2 form-group-sm">
				    <label class="control-label"  for="oshodvon">Von:</label>
				    <div class="input-group">
					<input ng-change="oshodDatumChanged('von')" ng-model="osobniHodnoceniVon" ui-date="dateOptions" type="text" class="form-control" id="oshodvon" placeholder="von">
				    </div>
				</div>
				<div class="form-group col-md-2 form-group-sm">
				    <label class="control-label"  for="oshodbis">Bis:</label>
				    <div class="input-group">
					<input ng-change="oshodDatumChanged('bis')" ng-model="osobniHodnoceniBis" ui-date="dateOptions" type="text" class="form-control" id="oshodbis" placeholder="bis">
				    </div>
				</div>
			    </div>

			    <!--<div ng-show="osobniHodnoceniArray !== null" class="row">-->
			    <!--2017-07-31-->
			    <div class="row">
				<div class="col-sm-12">
				    <table class="table table-condensed table-responsive table-striped table-hover">
					<thead>
					    <tr>
						<th class="bg-info"></th>
						<th class="bg-info text-right" ng-repeat="(jm, pocet) in osobniHodnoceniJMArray">{{jm}}</th>
					    </tr>
					    <tr>
						<th class="bg-info">normmonat</th>
						<td class="bg-info text-right" ng-repeat="(jm, pocet) in osobniHodnoceniJMArray">{{sumaOsobniHodnoceniMonat('castka',jm)}} Kč</td>
					    </tr>
					    <tr>
						<th class="bg-info">(anw/norm) ist</th>
						<th class="bg-info text-right" ng-repeat="(jm, pocet) in osobniHodnoceniJMArray">
						    ({{osobniHodnoceniKoeficientArray[jm]|numeraljs:'0.00'}}) {{(sumaOsobniHodnoceniMonat('castka',jm)*osobniHodnoceniKoeficientArray[jm])|numeraljs:'0'}} Kč
						</th>
					    </tr>
					    <tr>
						<th class="bg-info">OE</th>
						<th class="bg-info text-right" ng-repeat="(jm, pocet) in osobniHodnoceniJMArray">
						    <ui-select ng-model="hodnoceniOEselect" theme="bootstrap" close-on-select="true" style="width: 100%;" title="hodnotici OE" on-select="hodnoceniOESelectAction($item,$model,jm)">
							<ui-select-match placeholder="vyberte OE">{{$select.selected.oe}}</ui-select-match>
							<ui-select-choices repeat="s.oe as s in oes.oeArray | filter:$select.search">
							 <div ng-if="s.oe!='*'" ng-bind-html="s.oe"></div>
							 <div ng-if="s.oe=='*'">-</div>
							</ui-select-choices>
						    </ui-select>
						    <!--<div ng-if="osobniHodnoceniOeSelectArray[jm]!==null">-->
						    <div>
							<span class="label label-info" ng-repeat="o in osobniHodnoceniOeSelectArray[jm]">{{o}}</span>
							<span ng-if="osobniHodnoceniOeSelectArray[jm]===null">&nbsp;</span>
						    </div>
						</th>
					    </tr>
					</thead>
					<tbody>
					    <tr ng-repeat="of in osobniHodnoceniArray.hodnoceni.osobniFaktory">
						<th>
						    {{of.popis}}<br>
						    <span class="badge">váha: {{of.vaha|numeraljs:'0,0.00'}}</span>
						</th>
						<td class="text-right" ng-repeat="(jm, pocet) in osobniHodnoceniArray.jahrmonatArray">
						    <!--toto se zobrazi pokud hodnota v databazove tabulce existuje-->
						    <div ng-if="osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_osobni.rowexists">
							<div class="input-group input-group-sm">
							    <span class="input-group-btn input-group-sm">
								<button tabindex="-1" ng-if="osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_osobni.locked && isAdmin == true" class="btn btn-default no-print" title="odemkne hodnotu" type="button" ng-click="unlockOsobniHodnoceni(osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_osobni, jm)">
								    <span class="text-success glyphicon glyphicon-asterisk"></span>
								</button>
								<button ng-show="osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_osobni.locked === false" tabindex="-1" ng-disabled="osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_osobni.locked" class="btn btn-default no-print" title="{{osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_osobni.locked?'zamknuto':'odemknuto, stisknutim hodnotu zamknete'}}" type="button" ng-click="lockOsobniHodnoceni(osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_osobni, jm)">
								    <!--<span ng-if="p.locked" class="glyphicon glyphicon-lock"></span>-->
								    <!--<span ng-show="osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_osobni.locked === true" class="text-danger glyphicon glyphicon-lock"></span>-->
								    <span ng-show="osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_osobni.locked === false" class="text-success glyphicon glyphicon-lock"></span>
								    <!--<span ng-if="!p.locked" class="glyphicon glyphicon-unlock"></span>-->
								</button>
							    </span>
							    <input ng-class="" ng-disabled="osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_osobni.locked === true" ng-change="osobniHodnoceniChanged(osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_osobni)" type="text" ng-model="osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_osobni.hodnoceni" class="form-control input-sm text-right" title="hodnoceni podle:{{osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_osobni.oe}}" id="" />
							    <div class="input-group-addon input-group-sm">
								<span title="firemní hodnocení" ng-if="osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_firma !== null">{{osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_firma}}</span>
								<span title="nemá fir. hodnocení" class="glyphicon glyphicon-remove-circle" ng-if="osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_firma == null"></span>
							    </div>
							</div>
							<div class="input-group input-group-sm">
							    <input tabindex="-1" ng-class="" ng-disabled="true" ng-change="" type="text" ng-model="osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_osobni.castka" class="form-control input-sm text-right" title="castka" id="" />
							    <div title="" class="input-group-addon">
								<span>Kč</span>
							    </div>
							</div>
						    </div>
						    <!--pokud hodnota v tabulce neexistuje bude prazdno a pusto-->
						    <div ng-if="osobniHodnoceniArray.hodnoceni[of.id_faktor][jm].hodnoceni_osobni.rowexists===false">
							&nbsp;
						    </div>
						</td>
					    </tr>
					</tbody>
				    </table>
				</div>
			    </div>
			</div>
		    </div>
		</div>
	    </div>
	</div>
    </form>

<!-- Modal pro heslo-->
<div class="modal fade" id="extra_password_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Nenéé zlatíčko, zvýšená ostraha - chci ještě další heslo</h4>
      </div>
      <div class="modal-body">
	  <div class="row">
	      <div class="col-sm-6">
		  <img src="img/wtf.jpg" alt="co to ?" class="img-rounded img-responsive">
	      </div>
	      <div class="col-sm-6">
		  <div class="form-group">
		    <label for="exampleInputPassword1">Heslo</label>
		    <input type="password" class="form-control" id="extraPassword" ng-model="extraPassword" placeholder="Password">
		  </div>
		  <div class="alert alert-info">
		      Z důvodu citlivosti dále zobrazovaných údajů je nutné zadat znovu heslo. Pravděpodobně i jiné, než heslo přihlašovací. Po zobrazení následujících údajů nenechávejte
		       počítač volně přístupný nebo se odhlašte, přepněte na jiné zobrazení ....
		  </div>
	      </div>
	  </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">zavřít</button>
        <button type="button" ng-click="checkExtraPassword()" class="btn btn-primary">ověřit</button>
      </div>
    </div>
  </div>
</div>
<!------------------------------------------------------------------------------------>
</div>